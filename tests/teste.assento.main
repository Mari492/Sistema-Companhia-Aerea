#include <iostream>
#include <string>
#include "assento.h"

using namespace std;

int main() {
    int opcao;
    int codigo_voo, numero_assento;
    string novo_status;

    // Menu de operações
    do {
        cout << "\n----- Menu -----\n";
        cout << "1. Cadastrar Assento\n";
        cout << "2. Alterar Status de Assento\n";
        cout << "3. Buscar Assento\n";
        cout << "4. Listar Assentos de Voo\n";
        cout << "5. Sair\n";
        cout << "Escolha uma opcao: ";
        cin >> opcao;

        switch (opcao) {
            case 1: {
                // Cadastrar Assento
                cout << "Digite o código do voo: ";
                cin >> codigo_voo;
                cout << "Digite o número do assento: ";
                cin >> numero_assento;
                Assento::cadastrarAssento(codigo_voo, numero_assento);
                cout << "Assento cadastrado com sucesso!\n";
                break;
            }

            case 2: {
                // Alterar Status de Assento
                cout << "Digite o código do voo: ";
                cin >> codigo_voo;
                cout << "Digite o número do assento: ";
                cin >> numero_assento;
                cout << "Digite o novo status (ocupado/livre): ";
                cin >> novo_status;
                Assento::alterarStatusAssento(codigo_voo, numero_assento, novo_status);
                cout << "Status do assento alterado com sucesso!\n";
                break;
            }

            case 3: {
                // Buscar Assento
                cout << "Digite o código do voo: ";
                cin >> codigo_voo;
                cout << "Digite o número do assento: ";
                cin >> numero_assento;
                Assento* assento = Assento::buscarAssento(codigo_voo, numero_assento);
                if (assento != nullptr) {
                    cout << "Assento encontrado: Número " << assento->getNumero() 
                         << ", Status: " << assento->getStatus() << endl;
                    delete assento; // Libera a memória após o uso
                } else {
                    cout << "Assento não encontrado.\n";
                }
                break;
            }

            case 4: {
                // Listar Assentos de um Voo
                cout << "Digite o código do voo para listar os assentos: ";
                cin >> codigo_voo;
                Assento::listarAssentos(codigo_voo);
                break;
            }

            case 5:
                cout << "Saindo do programa...\n";
                break;

            default:
                cout << "Opção inválida. Tente novamente.\n";
        }

    } while (opcao != 5);

    return 0;
}
